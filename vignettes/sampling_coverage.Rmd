---
title: "Sampling Coverage"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Sampling Coverage}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

## Introduction 

The aim of this document is to provide examples of the different plots that can be produced using the coveragexxx() functions.


## Load the package

```{r setup}
library(RDBESvisualise)
```

## Prepare some test data

```{r}

  # Create an RDBESDataObject
  myH1RawObject <-
    RDBEScore::createRDBESDataObject(rdbesExtractPath = "../tests/testthat/h1_v_1_19_13")
  
  # Generate some quarters for CL (test data is all Q1)
  set.seed(1)
  myH1RawObject[['CL']]$CLquar <- as.integer(runif(nrow(myH1RawObject[['CL']]), min = 1, max= 4.99))
  
  # Generate some quarters for CE (test data is all Q1)
  set.seed(1)
  myH1RawObject[['CE']]$CEquar <-
    as.integer(runif(nrow(myH1RawObject[['CE']]), min = 1, max= 4.99))
  
  # Generate some values for SAsampWtLive (test data SAsampWtLive is all NA)
  set.seed(1)
  myH1RawObject[['SA']]$SAsampWtLive <- as.integer(runif(nrow(myH1RawObject[['SA']]), min = 1, max= 200))
  
  # Generate some stat rectagnle values (test data SAstatRect is all NA)
  set.seed(1)
  myH1RawObject[['SA']]$SAstatRect <- sample(unique(myH1RawObject[['CL']]$CLstatRect), size = nrow(myH1RawObject[['SA']]), replace = TRUE)


```


## Coverage plots

### Species

This output shows the top species landings - the bars represent relative species count values per year. The bars are coloured per quarter.


```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageBySpecies(
      dataToPlot = myH1RawObject,
      year = myYear,
      vesselFlag = myvesselFlag,
      catchCat = "Lan",
      landingsVariable = "CLoffWeight",
      samplingVariable = "SAsampWtLive",
    )

  myPlots

```

### Gear

The following output shows the top gears used in landings and sampling landings - the bars represent relative gear count values per plot.


```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageByGear(
      dataToPlot = myH1RawObject,
      year = myYear,
      vesselFlag = myvesselFlag,
      catchCat = "Lan",
      landingsVariable = "CLoffWeight",
      effortVariable = "CEnumFracTrips",
      samplingVariable = "SAsampWtLive",
    )

  myPlots

```

The following output shows the top gears used in effort and sampling landings - the bars represent relative gear count values per plot.



```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageByGear(
      dataToPlot = myH1RawObject,
      year = myYear,
      quarter = 1,
      vesselFlag = myvesselFlag,
      catchCat = "Lan",
      landingsVariable = "CLoffWeight",
      effortVariable = "CEnumFracTrips",
      samplingVariable = "SAsampWtLive",
      includeLandings = TRUE,
      includeEffort = TRUE,
      includeSamples = FALSE
    )

  myPlots

```

### Temporal

The following output shows the comparison of the landings variable 'CLoffWeight' vs the sampling variable 'SAsampWtLive' for sampling landings. The values are relative per variable.


```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageTemporal(
      dataToPlot = myH1RawObject,
      year = myYear,
      vesselFlag = myvesselFlag,
      catchCat = "Lan",
      landingsVariable = "CLoffWeight",
      samplingVariable = "SAsampWtLive",
      includeLandings = TRUE,
      includeEffort = FALSE,
      includeSamples = TRUE
    )

  myPlots


```

The following output shows the comparison of the landings variable 'CLoffWeight', the effort variable 'CEnumFracTrips' and the sampling variable 'SAsampWtLive' for sampling landings. The values are relative per variable.


```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageTemporal(
      dataToPlot = myH1RawObject,
      year = myYear,
      vesselFlag = myvesselFlag,
      catchCat = "Lan",
      landingsVariable = "CLoffWeight",
      effortVariable = "CEnumFracTrips",
      samplingVariable = "SAsampWtLive",
      includeLandings = TRUE,
      includeEffort = TRUE,
      includeSamples = TRUE
    )

  myPlots


```

### Spatial - points plot

The below output shows the spatial location of the landings variable 'CLoffWeight' and sampling variable 'SAsampWtLive' for sampling landings per statistical rectangle. The rectangles are coloured by the landings variable with red representing a higher value and blue representing a lower value. The circles show the sampling variable with higher values representing a larger circle. 


```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageSpatial(
    dataToPlot = myH1RawObject,
    year = myYear,
    vesselFlag = myvesselFlag,
    catchCat = "Lan",
    landingsVariable = "CLoffWeight",
    effortVariable = "CEnumFracTrips",
    samplingVariable = "SAsampWtLive",
    includeLandings = TRUE,
    includeEffort = TRUE,
    includeSamples = TRUE
  )

  myPlots

```


### Spatial - bivariate plot

This bivariate plot shows the spatial location of the landings variable 'CLoffWeight' and sampling variable 'SAsampWtLive' for sampling landings per statistical rectangle. The areas in blue represent higher values for the landings variable. The areas in red represent higher values for the sampling variable. Beige colours show low values for both landings and sampling. Purple shows high values for the landings variable and high values for the sampling variable.


```{r,warning=FALSE,message=FALSE}

  myYear = 1965
  myvesselFlag = "ZW"

  myPlots <- coverageSpatialBivariate(
      dataToPlot = myH1RawObject,
      year = myYear,
      vesselFlag = myvesselFlag,
      catchCat = "Lan",
      landingsVariable = "CLoffWeight",
      effortVariable = "CEnumFracTrips",
      samplingVariable = "SAsampWtLive",
      includeLandings = TRUE,
      includeEffort = TRUE
    )

  myPlots
  
  
```



```{r}
#END
```


